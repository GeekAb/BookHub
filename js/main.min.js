function bookListSuccess(t){t.detail=function(){return JSON.stringify(this)},t.isBookmarked=function(){return App.bookmarkedList&&1==App.bookmarkedList[this.id-1]?"active":""};var o=$("#bookinfo-template").html(),e=Mustache.to_html(o,t);$("#all-books").html(e),bindActions(),App.totalBooks=window.localStorage.totalBooks=t.books.length,$("#total-books").html(App.totalBooks),$("#bookmarked-count").html(App.bookmarked),$.material.init()}function bookListFail(){}function bindActions(){$(".check-detail").unbind("click").bind("click",function(){$(".other-details").hide();var t=$(this).attr("id").split("-")[1];$(".thumbnail").removeClass("selected"),$("#"+t+" .thumbnail").addClass("selected");var o=$("#"+t).data("details");o.f_rating=function(){var t="";for(i=0;i<parseInt(o.rating);i++)t+='<i class="material-icons rating-icon">grade</i>';return t};var e=$("#bookinfo-details-template").html(),a=Mustache.to_html(e,o);$("#book-details").html(a),$(".detail-close").unbind("click").bind("click",function(){$(".other-details").show(),$(".thumbnail").removeClass("selected"),$("#book-details").html("")})}),$("input.search-book-input").keypress(function(){setTimeout(function(){searchBooks($(this).val())},10)}),$("input.search-book-input").keyup(function(){searchBooks($(this).val())}),$(".bookmark-icon").unbind("click").bind("click",function(){$(this).hasClass("active")?($(this).removeClass("active"),App.bookmarked=App.bookmarked-1,App.bookmarkedList[$(this).parent().attr("id")-1]=0,$(this).children("i").html("turned_in_not")):(App.bookmarked=App.bookmarked+1,$(this).addClass("active"),App.bookmarkedList[$(this).parent().attr("id")-1]=1,$(".bookmark-icon i").html("turned_in")),window.localStorage.bookmarked=App.bookmarked,window.localStorage.bookmarkedList=App.bookmarkedList,$("#bookmarked-count").html(App.bookmarked)}),$("#only-bookmarked").unbind("click").bind("click",function(){$(".bookmark-icon").parent().hide(),$(".bookmark-icon.active").parent().show()})}function searchBooks(t){$(".book-element").each(function(){$(this).text().search(t)>-1?$(this).show():$(this).hide()})}App.init(),App.callAPI("book-list","?type=json&query=list_books",{authCheck:!1,successCallback:bookListSuccess,errorCallback:bookListFail});