function bookListSuccess(e){e.detail=function(){return JSON.stringify(this)};var t=$("#bookinfo-template").html(),o=Mustache.to_html(t,e);$("#all-books").html(o),bindActions(),App.totalBooks=window.localStorage.totalBooks=e.books.length,$.material.init()}function bookListFail(){}function bindActions(){$(".check-detail").unbind("click").bind("click",function(){$(".other-details").hide();var e=$(this).attr("id").split("-")[1];$(".thumbnail").removeClass("selected"),$("#"+e+" .thumbnail").addClass("selected");var t=$("#"+e).data("details");t.f_rating=function(){var e="";for(i=0;i<parseInt(t.rating);i++)e+='<i class="material-icons rating-icon">grade</i>';return e};var o=$("#bookinfo-details-template").html(),a=Mustache.to_html(o,t);$("#book-details").html(a),$(".detail-close").unbind("click").bind("click",function(){$(".other-details").show(),$(".thumbnail").removeClass("selected"),$("#book-details").html("")})}),$("input.search-book-input").keypress(function(){setTimeout(function(){searchBooks($(this).val())},10)}),$("input.search-book-input").keyup(function(){searchBooks($(this).val())}),$(".bookmark-icon").unbind("click").bind("click",function(){$(this).hasClass("active")?App.bookmarked=App.bookmarked-1:(App.bookmarked=App.bookmarked+1,$(this).addClass("active")),window.localStorage.bookmarked=App.bookmarked})}function searchBooks(e){$(".book-element").each(function(){$(this).text().search(e)>-1?$(this).show():$(this).hide()})}App.init(),App.callAPI("book-list","?type=json&query=list_books",{authCheck:!1,successCallback:bookListSuccess,errorCallback:bookListFail});